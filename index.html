<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>My Drive - Google Drive</title>
    <link rel="icon" type="image/x-icon" href="https://ssl.gstatic.com/docs/doclist/images/infinite_arrow_favicon_5.ico">
    <style>
        :root { --bg: #121212; --card: #1e1e1e; --accent: #007bff; --text: #ccc; }
        body { background: var(--bg); color: white; font-family: 'Segoe UI', sans-serif; margin: 0; text-align: center; overflow: hidden; touch-action: manipulation; }
        
        header { padding: 12px; background: #1a1a1a; border-bottom: 1px solid #333; position: sticky; top: 0; z-index: 10; }
        .search-row { display: flex; align-items: center; justify-content: center; gap: 10px; max-width: 500px; margin: 0 auto 10px; }
        #search { flex-grow: 1; padding: 10px 15px; border-radius: 8px; border: 1px solid #444; background: #222; color: white; outline: none; font-size: 14px; }
        
        .cat-bar { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; padding-bottom: 5px; }
        .cat-btn { background: #2a2a2a; color: #aaa; border: 1px solid #444; padding: 6px 12px; border-radius: 6px; cursor: pointer; font-size: 11px; display: flex; align-items: center; gap: 5px; }
        .cat-btn::before { content: "üìÅ"; }
        .cat-btn.active { border-color: var(--accent); color: var(--accent); background: #333; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 15px; padding: 20px; height: 75vh; overflow-y: auto; scrollbar-width: none; }
        .grid::-webkit-scrollbar { display: none; }
        
        .card { background: var(--card); border: 1px solid #333; border-radius: 12px; overflow: hidden; cursor: pointer; position: relative; transition: 0.2s; }
        .card:active { transform: scale(0.96); }
        .thumb { width: 100%; aspect-ratio: 16/9; object-fit: cover; background: #2a2a2a; opacity: 0.8; }
        .card-info { padding: 10px; text-align: left; }
        .card h3 { font-size: 11px; margin: 0; color: var(--text); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
        
        .fav-star { position: absolute; top: 8px; right: 8px; font-size: 18px; color: rgba(255,255,255,0.15); z-index: 5; text-shadow: 0 0 3px black; }
        .fav-star.active { color: #ffca28; opacity: 1; }

        #player { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index: 9999; overflow-y: auto; }
        .game-container { width: 100%; height: 100vh; background: #000; position: relative; }
        iframe { width:100%; height:100%; border:none; }
        
        .info-section { background: #1a1a1a; padding: 40px 25px; text-align: left; max-width: 800px; margin: 0 auto; border-top: 2px solid #333; line-height: 1.6; }
        .info-section h2 { color: var(--accent); margin: 0 0 10px; font-size: 20px; }
        .info-section h4 { color: #888; margin: 20px 0 5px; text-transform: uppercase; font-size: 10px; letter-spacing: 1px; }
        .print-btn { background: #2a2a2a; color: #ccc; border: 1px solid #444; padding: 8px 15px; border-radius: 6px; font-size: 12px; cursor: pointer; margin-bottom: 20px; display: inline-flex; align-items: center; gap: 8px; }

        .controls { position: fixed; top: 12px; left: 12px; z-index: 10001; display: flex; gap: 10px; }
        .ctrl-btn { color: rgba(255,255,255,0.4); background: rgba(0,0,0,0.6); border: 1px solid #444; padding: 6px 14px; border-radius: 6px; cursor: pointer; font-size: 11px; }
        
        .panic-trigger { position: fixed; bottom: 0; right: 0; width: 30px; height: 30px; z-index: 10002; cursor: default; }
    </style>
</head>
<body onkeydown="if(event.key.toLowerCase()==='p') panic()">

<header>
    <div class="search-row"><input type="text" id="search" placeholder="Search in Drive..." oninput="render()"></div>
    <div class="cat-bar" id="cats"></div>
</header>

<div class="grid" id="game-grid"></div>
<div class="panic-trigger" onclick="panic()"></div>

<div id="player">
    <div class="controls">
        <button class="ctrl-btn" onclick="closeGame()">[ CLOSE FILE ]</button>
        <button class="ctrl-btn" onclick="reloadGame()">[ RE-SYNC ]</button>
    </div>
    <div class="game-container"><iframe id="frame" src="about:blank"></iframe></div>
    <div class="info-section">
        <h2 id="info-title">File Preview</h2>
        <button class="print-btn" onclick="panic()">üìÑ Print to PDF</button>
        <hr style="border: 0; border-top: 1px solid #333;">
        <h4>Technical Definition</h4>
        <p id="info-def"></p>
        <h4>Operation Manual</h4>
        <p id="info-how"></p>
        <div style="height: 100px;"></div>
    </div>
</div>

<script>
    let currentFilter = 'All';
    let favorites = JSON.parse(localStorage.getItem('favGames')) || [];

    const games = [
        { "t": "Slope", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9zbG9wZS54bWw=", "c": "Simulation", "d": "Physics-based velocity simulator.", "h": "Steer using lateral inputs." },
        { "t": "Moto X3M", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9tb3RvLXgzbS54bWw=", "c": "Simulation", "d": "Gravity rotation mechanics.", "h": "Arrows to drive and flip." },
        { "t": "Eggy Car", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9lZ2d5LWNhci54bWw=", "c": "Simulation", "d": "Inertia and balance simulation.", "h": "Control acceleration for stability." },
        { "t": "Stickman Hook", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9zdGlja21hbi1ob29rLnhtbA==", "c": "Simulation", "d": "Centrifugal force analysis.", "h": "Hold to attach; release for momentum." },
        { "t": "Snow Rider 3D", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9zbm93LXJpZGVyLTNkLnhtbA==", "c": "Simulation", "d": "Downhill navigation simulator.", "h": "Avoid obstacles; collect data nodes." },
        { "t": "Retro Bowl", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9yZXRyby1ib3dsLnhtbA==", "c": "Strategy", "d": "Strategic coordinate allocation.", "h": "Drag to pass; tap to dodge." },
        { "t": "Basket Stars", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9iYXNrZXRiYWxsLXN0YXJzLnhtbA==", "c": "Strategy", "d": "Projectile trajectory simulator.", "h": "Swipe up to initiate trajectory." },
        { "t": "Soccer Random", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9zb2NjZXItcmFuZG9tLnhtbA==", "c": "Strategy", "d": "Randomized collision physics.", "h": "Single button input for movement." },
        { "t": "Boxing Random", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9ib3hpbmctcmFuZG9tLnhtbA==", "c": "Strategy", "d": "Combat impact detection module.", "h": "Input initiates randomized motion." },
        { "t": "Geometry Dash", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9nZW9tZXRyeS1kYXNoLnhtbA==", "c": "Logic", "d": "Rhythmic synchronization exercise.", "h": "Jump to clear obstacles via audio." },
        { "t": "Cookie Clicker", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9jb29raWUtY2xpY2tlci54bWw=", "c": "Logic", "d": "Exponential growth modeling.", "h": "Scale production via automation." },
        { "t": "Drift Boss", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9kcmlmdC1ib3NzLnhtbA==", "c": "Logic", "d": "Lateral movement timing analysis.", "h": "Hold for right; release for left." },
        { "t": "2048", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi8yMDQ4LnhtbA==", "c": "Logic", "d": "Grid-based numerical merging.", "h": "Swipe to combine similar modules." },
        { "t": "Tunnel Rush", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi90dW5uZWwtcnVzaC54bWw=", "c": "Action", "d": "Vision processing simulator.", "h": "Rotate tunnel to avoid barriers." },
        { "t": "Tomb of Mask", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi90b21iLW9mLXRoZS1tYXNrLnhtbA==", "c": "Action", "d": "Spatial pathfinding test.", "h": "Swipe to navigate vertical mazes." },
        { "t": "Run 3", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9ydW4tMy54bWw=", "c": "Action", "d": "Spatial void navigation.", "h": "Run and jump to shift gravity." },
        { "t": "Pac-Man", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9wYWNtYW4ueG1s", "c": "Action", "d": "Algorithmic maze recognition.", "h": "Navigate grid to optimize pathing." },
        { "t": "Chrome Dino", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9jaHJvbWUtZGluby54bWw=", "c": "Action", "d": "Reaction velocity algorithm.", "h": "Space/tap to jump obstacles." },
        { "t": "DuckCraft", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9kdWNrLWNyYWZ0LnhtbA==", "c": "Environment", "d": "Voxel structural analysis.", "h": "Collect and place block modules." },
        { "t": "Doodle Jump", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9kb29kbGUtanVtcC54bWw=", "c": "Environment", "d": "Vertical ascent kinetics.", "h": "Tilt/Arrows to navigate platforms." },
        { "t": "FNAF 2", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9mbmFmLTIueG1s", "c": "Environment", "d": "Security power conservation.", "h": "Monitor cameras and defense." },
        { "t": "World Cup", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9hLXNtYWxsLXdvcmxkLWN1cC54bWw=", "c": "Strategy", "d": "Collision detector simulation.", "h": "Drag to propel toward target." },
        { "t": "99 Nights", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi85OS1uaWdodHMueG1s", "c": "Action", "d": "Survival cycle duration test.", "h": "Neutralize threats during cycle." }
    ];

    function panic() { window.location.replace('https://classroom.google.com'); }
    window.addEventListener('touchstart', (e) => { if (e.touches.length >= 3) panic(); });

    function toggleFav(e, title) {
        e.stopPropagation();
        favorites.includes(title) ? favorites = favorites.filter(f => f !== title) : favorites.push(title);
        localStorage.setItem('favGames', JSON.stringify(favorites));
        render();
    }

    function render() {
        const grid = document.getElementById('game-grid');
        const term = document.getElementById('search').value.toLowerCase();
        const cats = ['All', 'Favorites', ...new Set(games.map(g => g.c))];
        document.getElementById('cats').innerHTML = cats.map(c => `<button class="cat-btn ${c === currentFilter ? 'active' : ''}" onclick="currentFilter='${c}';render()">${c}</button>`).join('');

        const filtered = games.filter(g => {
            const matchSearch = g.t.toLowerCase().includes(term);
            const matchCat = (currentFilter === 'All' || (currentFilter === 'Favorites' ? favorites.includes(g.t) : g.c === currentFilter));
            return matchSearch && matchCat;
        });

        grid.innerHTML = filtered.map(g => `
            <div class="card" onclick="play('${g.u}', '${g.t}', '${g.d}', '${g.h}')">
                <span class="fav-star ${favorites.includes(g.t) ? 'active' : ''}" onclick="toggleFav(event, '${g.t}')">‚òÖ</span>
                <img class="thumb" src="https://api.dicebear.com/7.x/identicon/svg?seed=${g.t}">
                <div class="card-info"><h3>${g.t}</h3></div>
            </div>
        `).join('');
    }

    function play(encUrl, title, def, how) { 
        document.getElementById('frame').src = atob(encUrl); 
        document.getElementById('info-title').innerText = title;
        document.getElementById('info-def').innerText = def;
        document.getElementById('info-how').innerText = how;
        document.getElementById('player').style.display = 'block'; 
        document.getElementById('player').scrollTop = 0;
        setTimeout(() => window.focus(), 500);
    }

    function closeGame() { document.getElementById('player').style.display = 'none'; document.getElementById('frame').src = 'about:blank'; }
    function reloadGame() { const f = document.getElementById('frame'); const s = f.src; f.src = 'about:blank'; setTimeout(() => { f.src = s; }, 100); }

    render();
</script>
</body>
</html>
