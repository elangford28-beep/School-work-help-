<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Web Dashboard</title>
    <style>
        :root { 
            --bg: #0b0e14; 
            --card: #161b22; 
            --accent: #7928ca; 
            --text: #e6edf3; 
        }
        
        body { 
            background: var(--bg); color: var(--text); font-family: 'Inter', -apple-system, sans-serif; 
            margin: 0; overflow: hidden; touch-action: manipulation; 
        }
        
        header { 
            padding: 20px; background: rgba(22, 27, 34, 0.9); backdrop-filter: blur(15px);
            border-bottom: 1px solid #30363d; position: sticky; top: 0; z-index: 10; 
        }

        .search-row { display: flex; max-width: 600px; margin: 0 auto 15px; }
        #search { width: 100%; padding: 12px 20px; border-radius: 12px; border: 1px solid #30363d; background: #0d1117; color: white; font-size: 16px; outline: none; }
        
        .cat-bar { display: flex; justify-content: center; gap: 8px; flex-wrap: wrap; }
        .cat-btn { background: #21262d; color: #8b949e; border: 1px solid #30363d; padding: 6px 14px; border-radius: 20px; cursor: pointer; font-size: 12px; transition: 0.2s; }
        .cat-btn.active { background: var(--accent); color: white; border-color: var(--accent); }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 20px; padding: 25px; height: 75vh; overflow-y: auto; scrollbar-width: none; }
        .grid::-webkit-scrollbar { display: none; }
        
        .card { background: var(--card); border: 1px solid #30363d; border-radius: 12px; overflow: hidden; cursor: pointer; position: relative; transition: 0.3s; }
        .card:hover { transform: translateY(-5px); border-color: var(--accent); box-shadow: 0 8px 15px rgba(0,0,0,0.4); }

        .thumb-container { width: 100%; aspect-ratio: 16/10; overflow: hidden; background: #000; position: relative; }
        .thumb-img { width: 100%; height: 100%; object-fit: cover; transition: 0.3s; }
        .card:hover .thumb-img { opacity: 0.6; transform: scale(1.05); }

        .card-info { padding: 12px; text-align: center; background: #161b22; }
        .card h3 { font-size: 13px; margin: 0; font-weight: 600; letter-spacing: 0.5px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        
        .fav-star { position: absolute; top: 8px; right: 8px; font-size: 18px; color: rgba(255,255,255,0.2); z-index: 5; text-shadow: 0 0 5px black; }
        .fav-star.active { color: #f1e05a; }

        #player { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:black; z-index: 9999; }
        iframe { width:100%; height:100%; border:none; }
        
        .controls { position: fixed; bottom: 25px; left: 50%; transform: translateX(-50%); z-index: 10001; display: flex; gap: 20px; background: rgba(0,0,0,0.85); padding: 12px 25px; border-radius: 40px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); }
        .ctrl-btn { color: white; background: none; border: none; cursor: pointer; font-size: 11px; font-weight: 900; letter-spacing: 1px; }
        .panic-trigger { position: fixed; bottom: 0; right: 0; width: 40px; height: 40px; z-index: 10002; }
    </style>
</head>
<body onkeydown="if(event.key.toLowerCase()==='p') panic()">

<header>
    <div class="search-row"><input type="text" id="search" placeholder="Search Game Library..." oninput="render()"></div>
    <div class="cat-bar" id="cats"></div>
</header>

<div class="grid" id="game-grid"></div>
<div class="panic-trigger" onclick="panic()"></div>

<div id="player">
    <div class="controls">
        <button class="ctrl-btn" onclick="closeGame()">EXIT GAME</button>
        <button class="ctrl-btn" onclick="reloadGame()" style="color:#666;">REFRESH</button>
    </div>
    <iframe id="frame" src="about:blank"></iframe>
</div>

<script>
    let currentFilter = 'All';
    let favorites = JSON.parse(localStorage.getItem('favGames')) || [];

    const games = [
        { "t": "Slope", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9zbG9wZS54bWw=", "c": "Action", "i": "https://raw.githubusercontent.com/skid-inc/Slope/master/slope.png" },
        { "t": "Moto X3M", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9tb3RvLXgzbS54bWw=", "c": "Sports", "i": "https://moto-x3m.io/images/moto-x3m.jpg" },
        { "t": "Eggy Car", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9lZ2d5LWNhci54bWw=", "c": "Casual", "i": "https://eggycar.org/eggy-car.png" },
        { "t": "Retro Bowl", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9yZXRyby1ib3dsLnhtbA==", "c": "Sports", "i": "https://retrobowl.me/retro-bowl-logo.png" },
        { "t": "Geometry Dash", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9nZW9tZXRyeS1kYXNoLnhtbA==", "c": "Hard", "i": "https://upload.wikimedia.org/wikipedia/en/3/35/Geometry_Dash_Logo.PNG" },
        { "t": "Run 3", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9ydW4tMy54bWw=", "c": "Action", "i": "https://run3.io/images/run-3-logo.png" },
        { "t": "Cookie Clicker", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9jb29raWUtY2xpY2tlci54bWw=", "c": "Casual", "i": "https://orteil.dashnet.org/cookieclicker/img/intro_bezel.png" },
        { "t": "Tunnel Rush", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi90dW5uZWwtcnVzaC54bWw=", "c": "Action", "i": "https://tunnel-rush.io/images/tunnel-rush-logo.png" },
        { "t": "2048", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi8yMDQ4LnhtbA==", "c": "Puzzle", "i": "https://2048game.com/meta/apple-touch-icon.png" },
        { "t": "Pac-Man", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9wYWNtYW4ueG1s", "c": "Retro", "i": "https://pacman.com/en/images/pacman.png" },
        { "t": "Chrome Dino", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9jaHJvbWUtZGluby54bWw=", "c": "Retro", "i": "https://raw.githubusercontent.com/wayou/t-rex-runner/master/assets/default_100_percent/100-offline-sprite.png" },
        { "t": "FNAF 2", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9mbmFmLTIueG1s", "c": "Hard", "i": "https://images.igdb.com/igdb/image/upload/t_cover_big/co1v9m.png" },
        { "t": "Soccer Random", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9zb2NjZXItcmFuZG9tLnhtbA==", "c": "Casual", "i": "https://play-lh.googleusercontent.com/V_9V3X_pB3RUKT4W8Xm6rA_H7Kx9X0k8mS-P7X6G2XG=" },
        { "t": "Stickman Hook", "u": "aHR0cHM6Ly9pbWFnZXMtb3BlbnNvY2lhbC5nb29nbGV1c2VyY29udGVudC5jb20vZ2FkZ2V0cy9pZnI/dXJsPWh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9yYWJiaWRzNzYvNjZAbWFpbi9zdGlja21hbi1ob29rLnhtbA==", "c": "Action", "i": "https://play-lh.googleusercontent.com/6XyU-8vX9Y6X9X0k8mS-P7X6G2XG=" }
        // Add more games using this format
    ];

    function panic() { window.location.replace('https://classroom.google.com'); }

    function render() {
        const grid = document.getElementById('game-grid');
        const term = document.getElementById('search').value.toLowerCase();
        const cats = ['All', 'Favorites', ...new Set(games.map(g => g.c))];
        document.getElementById('cats').innerHTML = cats.map(c => `<button class="cat-btn ${c === currentFilter ? 'active' : ''}" onclick="currentFilter='${c}';render()">${c}</button>`).join('');

        const filtered = games.filter(g => {
            const matchSearch = g.t.toLowerCase().includes(term);
            const matchCat = (currentFilter === 'All' || (currentFilter === 'Favorites' ? favorites.includes(g.t) : g.c === currentFilter));
            return matchSearch && matchCat;
        });

        grid.innerHTML = filtered.map(g => `
            <div class="card" onclick="play('${g.u}')">
                <span class="fav-star ${favorites.includes(g.t) ? 'active' : ''}" onclick="event.stopPropagation();toggleFav('${g.t}')">â˜…</span>
                <div class="thumb-container">
                    <img class="thumb-img" src="${g.i}" onerror="this.src='https://api.dicebear.com/7.x/identicon/svg?seed=${g.t}'">
                </div>
                <div class="card-info"><h3>${g.t}</h3></div>
            </div>
        `).join('');
    }

    function toggleFav(title) {
        favorites.includes(title) ? favorites = favorites.filter(f => f !== title) : favorites.push(title);
        localStorage.setItem('favGames', JSON.stringify(favorites));
        render();
    }

    function play(encUrl) { 
        document.getElementById('frame').src = atob(encUrl); 
        document.getElementById('player').style.display = 'block'; 
    }

    function closeGame() { document.getElementById('player').style.display = 'none'; document.getElementById('frame').src = 'about:blank'; }
    function reloadGame() { const f = document.getElementById('frame'); const s = f.src; f.src = 'about:blank'; setTimeout(() => { f.src = s; }, 100); }

    render();
</script>
</body>
</html>
